Trying to make a profit in the stock market using statistical algorithms, is a hard but lucrative problem, most of the hedge founds operating today use algorithms to trade and some estimates state that $60-75$% of the total trades made in the world are algorithmic. 

The objective then, is to develop an algorithmic strategy to trade in the SP500 market, a set of the top 500 US stocks. I choose this market because it is well known, which makes it very liquid and the data is easy to obtain and in good quality. I must say, it has the disadvantage of being very efficient, thus making it hard to make a profit. In future work, this algorithm should be applied to other less efficient markets. 

The algorithm developed, is based on an expansion of a very simple algorithm called mean reversion. It is based on computing a rolling mean of a stock and generating buy signals when the current price of the stock is below a threshold and sell signals when the price is above a threshold. Then once the price crosses the mean again, the open positions get closed. This strategy leaves two free parameters, the rolling window used to compute the rolling mean of the price and the threshold parameter. With the rolling mean, the objective is to create an stationary time series around that mean such that mean reversion is very likely.

This whole strategy is based in the assumption that price tends to revert to the mean of the correlated stocks being considered over time. Some of the advantages that this method presents over simply buying shares of stocks and waiting, is the market neutrality. It implies that it can profit from both increasing and decreasing prices since it can hold both short and long positions at different moments in time. 
This approach by itself isn't particularly profitable, since it can happen that for instance a buy signal is sent and when the price finally reverts to the mean, the mean is below the price where the buy signal was sent. This is a problem that is mitigate with the variant proposed here. 

Although the algorithm proposed is a simple algorithm, I couldn't find a reference of this algorithm, but I am sure that some variants of it have been implemented, being itself a variant of mean reversion. It basically consists of computing the ensemble's rolling mean and variance of a group of stocks with similar statistical properties and using that to generate trading signals within the stocks of the same ensembles. But first of all, lets start by determining how the ensembles are created. The supposition is that since now the rolling mean is that of the whole ensemble, it will be less susceptible to random fluctuations, since essentially for the mean to move, there must be a global fluctuation that involves all the stocks in the group.
